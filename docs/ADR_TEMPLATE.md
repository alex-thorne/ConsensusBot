# ADR Template for ConsensusBot

This template shows the format that ConsensusBot uses when generating Architecture Decision Records in Azure DevOps.

## Filename Convention

```
YYYY-MM-DD-decision-title-in-kebab-case.md
```

Examples:
- `2026-02-01-adopt-microservices-architecture.md`
- `2026-02-15-migrate-to-kubernetes.md`
- `2026-03-01-use-graphql-for-api.md`

## ADR Content Template

```markdown
# Decision: [Decision Text]

Date: YYYY-MM-DD

## Status

[Accepted | Rejected | Cancelled]

## Context

Decision initiated by @[username] on YYYY-MM-DD in #[channel-name].

[Optional: Additional context from thread discussion]

## Decision

[The full decision text as provided in the /consensus command]

## Votes

**Summary:**
- Yes: N
- No: N  
- Abstain: N
- Total Participants: N

**Detailed Votes:**
- @username1: Yes
- @username2: No
- @username3: Abstain
- @username4: Yes

**Vote Threshold:** [Majority | Unanimous]

**Result:** [Accepted | Rejected]

## Consequences

### If Accepted

[Consequences inferred from discussion or marked as N/A]

### If Rejected

[Consequences of not taking this decision]

## Participants

- @username1
- @username2
- @username3
- @username4

## Timeline

- **Initiated:** YYYY-MM-DD HH:MM UTC
- **Deadline:** YYYY-MM-DD
- **Finalized:** YYYY-MM-DD HH:MM UTC
- **Duration:** N days

## Additional Notes

[Any important notes from the Slack thread discussion]

## References

- Slack Thread: [Link to Slack thread]
- Related ADRs: [Links if applicable]

---

*This ADR was automatically generated by ConsensusBot.*
```

## Field Descriptions

### Status
- **Accepted**: Majority/unanimous vote in favor
- **Rejected**: Majority/unanimous vote against
- **Cancelled**: Decision process cancelled (e.g., channel deleted, manually cancelled)

### Context
- Who initiated the decision
- When and where it was initiated
- Any important context from the thread

### Decision
- The exact text from the `/consensus` command
- Unmodified, as originally stated

### Votes
- Complete breakdown of all votes
- Summary and detailed per-user votes
- Threshold requirement (majority or unanimous)
- Final result

### Consequences
- Automatically populated from thread discussion if possible
- Otherwise marked as "N/A" or "To be determined"

### Participants
- All users tagged in original `/consensus` command
- Active participants only (excludes users who left workspace)

### Timeline
- All timestamps in UTC
- Key milestones in the decision process

### Additional Notes
- Important discussion points from thread
- Edge cases or special circumstances
- Deviations from normal process

### References
- Direct link to Slack thread
- Links to related decisions
- Links to relevant documentation

## Example ADR

```markdown
# Decision: Adopt Kubernetes for Container Orchestration

Date: 2026-02-01

## Status

Accepted

## Context

Decision initiated by @alice on 2026-02-01 in #architecture-decisions.

The team has been running containers using Docker Compose in production, but we're experiencing scaling challenges and need a more robust orchestration solution. This decision evaluates whether we should adopt Kubernetes.

## Decision

Should we migrate our containerized services from Docker Compose to Kubernetes for production deployments?

## Votes

**Summary:**
- Yes: 4
- No: 1
- Abstain: 1
- Total Participants: 6

**Detailed Votes:**
- @alice: Yes
- @bob: Yes
- @charlie: No
- @diana: Yes
- @eve: Abstain
- @frank: Yes

**Vote Threshold:** Majority

**Result:** Accepted (67% in favor)

## Consequences

### Accepting Kubernetes

**Positive:**
- Better scaling capabilities for our microservices
- Improved high availability and self-healing
- Industry-standard solution with strong community support
- Easier multi-cloud deployments

**Negative:**
- Steep learning curve for team members
- Increased infrastructure complexity
- Higher initial setup time (~2-3 sprints)
- Need to hire/train for Kubernetes expertise

### Timeline Impact
- Sprint 1: Training and proof of concept
- Sprint 2-3: Migration of non-critical services
- Sprint 4: Production migration

## Participants

- @alice (Staff Engineer)
- @bob (Senior Developer)
- @charlie (DevOps Lead)
- @diana (Engineering Manager)
- @eve (Product Manager)
- @frank (Senior Developer)

## Timeline

- **Initiated:** 2026-02-01 09:00 UTC
- **Deadline:** 2026-02-05
- **Finalized:** 2026-02-03 14:23 UTC
- **Duration:** 2 days

## Additional Notes

Charlie (@charlie) voted No with the following concern: "We should consider managed Kubernetes (AKS/EKS) instead of self-hosted to reduce operational burden." This was noted and agreed upon by the teamâ€”we will use Azure Kubernetes Service (AKS).

Eve (@eve) abstained as this is primarily a technical decision outside her domain expertise.

## References

- Slack Thread: https://yourworkspace.slack.com/archives/C01234567/p1234567890123456
- Related ADRs: 
  - [2026-01-15-containerize-all-services.md](2026-01-15-containerize-all-services.md)
- External Resources:
  - [Kubernetes Documentation](https://kubernetes.io/docs/)
  - [AKS Overview](https://azure.microsoft.com/en-us/services/kubernetes-service/)

---

*This ADR was automatically generated by ConsensusBot on 2026-02-03.*
```

## Notes for Implementation

1. **Auto-generated sections**: Status, Votes, Participants, Timeline should be fully automated
2. **Semi-automated sections**: Context, Consequences can be populated from thread discussion using NLP/heuristics
3. **Manual sections**: Additional Notes may require human review
4. **Links**: Slack thread link should be constructed from channel ID and message timestamp
5. **Formatting**: Use consistent Markdown formatting for readability
6. **Metadata**: Consider adding YAML frontmatter for parsing:

```yaml
---
title: "Adopt Kubernetes for Container Orchestration"
date: 2026-02-01
status: accepted
participants: 6
yes_votes: 4
no_votes: 1
abstain_votes: 1
tags: [infrastructure, kubernetes, containers]
---
```

This metadata enables easier searching and categorization of ADRs.